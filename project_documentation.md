# توثيق مشروع نظام المحاسبة (Broman Real Estate)

## 1. نظرة عامة على المشروع

يهدف هذا المشروع إلى توفير نظام محاسبي متكامل لشركة Broman Real Estate، مع التركيز على المرونة وقابلية التخصيص لتمكين مسؤول النظام (Admin) من إدارة قواعد العمل والإعدادات المالية مباشرة من لوحة التحكم. يشتمل النظام على واجهة خلفية (Backend) مبنية باستخدام Flask وواجهة أمامية (Frontend) مبنية باستخدام React، مما يوفر تجربة مستخدم سلسة وفعالة.

## 2. الميزات الجديدة المنفذة

تم تطوير وتحديث النظام ليشمل الميزات التالية التي تركز على قابلية التخصيص الديناميكية:

### 2.1. قواعد الحسابات الديناميكية (العمولات، الضرائب، الخصومات)

تم تصميم النظام للسماح للمسؤول بإضافة وتعديل وحذف أنواع مختلفة من العمولات، الضرائب، أو الخصومات من خلال لوحة التحكم. يمكن تحديد كل بند باسمه (مثل "ضريبة القيمة المضافة"، "عمولة تسويق") ونوعه (نسبة مئوية % أو مبلغ ثابت).

**كيفية الإدارة:**

1.  **الوصول**: يمكن للمسؤول الوصول إلى هذه الإعدادات من خلال قسم "الحسابات الديناميكية" في لوحة التحكم.
2.  **إضافة/تعديل قاعدة**: يمكن إضافة قاعدة جديدة أو تعديل قاعدة موجودة بتحديد:
    *   **الاسم بالعربية والإنجليزية**: لتحديد اسم القاعدة.
    *   **النوع**: نسبة مئوية أو مبلغ ثابت.
    *   **القيمة**: النسبة المئوية أو المبلغ الثابت.
    *   **نوع الوحدة**: لتطبيق القاعدة على أنواع وحدات محددة (اختياري).
    *   **الحالة**: تفعيل أو تعطيل القاعدة.
3.  **الحذف**: يمكن حذف القواعد غير المرغوب فيها.

### 2.2. قوالب الطباعة الديناميكية (الفواتير، الشيكات، الإيصالات، التقارير)

تم تطوير نظام قوالب طباعة مرن يسمح للمسؤول بإنشاء وتخصيص قوالب الطباعة لمختلف المستندات المالية.

**كيفية الإدارة:**

1.  **الوصول**: يمكن للمسؤول الوصول إلى هذه الإعدادات من خلال قسم "الطباعة والتصدير المتقدمة" في لوحة التحكم.
2.  **إضافة/تعديل قالب**: يمكن إضافة قالب جديد أو تعديل قالب موجود بتحديد:
    *   **الاسم بالعربية والإنجليزية**: لتحديد اسم القالب.
    *   **نوع القالب**: فاتورة، شيك، إيصال، أو تقرير.
    *   **الوصف**: وصف للقالب.
    *   **افتراضي**: تحديد ما إذا كان هذا القالب هو الافتراضي لنوعه.
    *   **محتوى القالب**: (ميزة مستقبلية: سيتم توفير محرر بصري لتخصيص محتوى القالب باستخدام حقول ديناميكية).
3.  **الحذف**: يمكن حذف القوالب غير المرغوب فيها.

### 2.3. وظيفة التصدير الديناميكية

تم تحسين وظيفة التصدير للسماح للمسؤول بتصدير البيانات إلى ملفات Excel مع إمكانية تحديد نطاق زمني ونوع البيانات المراد تصديرها.

**كيفية الاستخدام:**

1.  **الوصول**: من قسم "الطباعة والتصدير المتقدمة"، تبويب "تصدير البيانات".
2.  **تحديد الفلاتر**: يمكن تحديد تاريخ البداية وتاريخ النهاية، ونوع التصدير (المبيعات، المصروفات، تقرير شامل).
3.  **التصدير**: النقر على زر التصدير المناسب لتنزيل ملف Excel بالبيانات المحددة.

### 2.4. إنشاء الشيكات

تم توفير واجهة لإنشاء الشيكات مع إمكانية إدخال تفاصيل المستفيد والمبلغ والتاريخ والملاحظات. (ميزة مستقبلية: سيتم ربطها بنظام قوالب الطباعة الديناميكية لتخصيص شكل الشيك المطبوع).

**كيفية الاستخدام:**

1.  **الوصول**: من قسم "الطباعة والتصدير المتقدمة"، تبويب "إنتاج الشيكات".
2.  **إدخال البيانات**: إدخال تفاصيل الشيك مثل المستفيد، المبلغ، التاريخ، المبلغ بالحروف، والملاحظات.
3.  **إنتاج الشيك**: النقر على زر "إنتاج الشيك" لتوليد ملف PDF للشيك.

## 3. إرشادات الإعداد والتشغيل

### 3.1. المتطلبات الأساسية

*   Python 3.x
*   Node.js و npm (أو pnpm)
*   Git

### 3.2. إعداد الواجهة الخلفية (Backend)

1.  **الانتقال إلى مجلد الواجهة الخلفية**:
    ```bash
    cd acc_manus2/backend
    ```
2.  **تثبيت التبعيات**:
    ```bash
    pip install -r requirements.txt
    ```
3.  **تشغيل الخادم**:
    ```bash
    python src/main.py
    ```
    الخادم سيعمل على `http://localhost:5000`.

### 3.3. إعداد الواجهة الأمامية (Frontend)

1.  **الانتقال إلى مجلد الواجهة الأمامية**:
    ```bash
    cd acc_manus2/frontend
    ```
2.  **تثبيت التبعيات**:
    ```bash
    npm install
    # أو pnpm install إذا كنت تستخدم pnpm
    ```
3.  **تشغيل التطبيق**:
    ```bash
    npm run dev
    ```
    التطبيق سيعمل عادةً على `http://localhost:5173` أو منفذ مشابه.

## 4. التوثيق المستقبلي

*   **محرر قوالب الطباعة**: تطوير محرر بصري (WYSIWYG) لتخصيص قوالب الطباعة بشكل كامل.
*   **تخصيص أعمدة التصدير**: إضافة خيار للمسؤول لتحديد الأعمدة التي يرغب في تصديرها إلى Excel.
*   **تقارير مالية متقدمة**: تطوير تقارير مالية قابلة للتخصيص بشكل أكبر (مثل تقارير الأرباح والخسائر، الميزانية العمومية).
*   **نظام صلاحيات متقدم**: تحسين نظام الصلاحيات للمستخدمين.

--- 

**المؤلف:** Manus AI
**التاريخ:** 17 سبتمبر 2025
